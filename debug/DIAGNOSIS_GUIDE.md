# 🔍 页面诊断工具使用指南

## 问题描述

扩展提示：**"未找到图片上传按钮"**

这意味着扩展无法在 grok.com/imagine 页面上找到文件上传的 input 元素。

## 解决步骤

### 第一步：访问正确的页面

1. 打开浏览器
2. 访问 **https://grok.com/imagine**
3. **确保已登录** X/Twitter 账号
4. 等待页面完全加载

### 第二步：检查页面模式

查看页面上是否有以下内容：

- ✅ **图片/视频切换按钮** - 如果有，请点击进入"视频"或"Image-to-Video"模式
- ✅ **上传按钮或拖放区域** - 应该能看到上传图片的位置
- ✅ **提示词输入框** - 用于输入描述的文本框

> [!IMPORTANT]
> 如果看不到上传区域，可能需要：
> - 点击页面上的某个标签页（如"Video"、"Imagine"等）
> - 滚动页面查找上传区域
> - 确认已登录账号

### 第三步：运行诊断脚本

1. 在 grok.com/imagine 页面上，按 **F12** 打开开发者工具
2. 切换到 **Console（控制台）** 标签
3. 复制整个 `debug/page-diagnostic.js` 文件的内容
4. 粘贴到控制台并按回车运行

### 第四步：查看诊断结果

脚本会输出以下信息：

#### 📁 文件输入元素
```
找到 X 个文件输入元素:

【文件输入 #1】
  可见性: ✅ 可见 / ❌ 隐藏
  accept: image/*, video/*
  id: upload-input
  class: ...
  ✨ 推荐选择器: #upload-input
```

#### 📝 文本输入元素
```
找到 X 个 textarea 元素:

【Textarea #1】
  placeholder: Enter your prompt...
  id: prompt-input
```

#### 🔘 按钮列表
```
找到 X 个可见按钮:

【按钮 #1】
  文本: "Generate"
  type: submit
```

### 第五步：更新扩展配置

根据诊断结果，我会更新 `content.js` 中的选择器。

**请将控制台的输出截图或复制文本发给我**，我会根据实际的 DOM 结构更新扩展。

## 常见问题

### Q1: 诊断脚本显示"未找到任何文件输入元素"

**可能原因：**
- ❌ 未登录 - 请先登录 X/Twitter 账号
- ❌ 未进入正确模式 - 点击页面上的"Video"或"Imagine"标签
- ❌ 页面未加载完成 - 等待几秒后重新运行脚本
- ❌ Cloudflare 验证 - 完成人机验证后重试

### Q2: 找到了文件输入，但都是隐藏的

**这是正常的！** 大多数网站都会隐藏文件输入，通过按钮触发。扩展应该能够正常工作。

如果扩展仍然无法工作，可能是选择器不够精确，请提供诊断输出。

### Q3: 页面结构与扩展期望不同

Grok 可能更新了页面，使用了新的元素或交互方式。这种情况下需要：

1. 运行诊断脚本获取最新的 DOM 结构
2. 根据诊断结果更新 `content.js` 中的选择器
3. 可能需要添加额外的步骤（如点击模式切换按钮）

## 临时解决方案

如果扩展暂时无法自动化，您可以：

1. **手动操作** - 手动上传第一张图片和提示词，然后让扩展继续后续步骤
2. **更新 URL** - 确保在正确的 URL 上（https://grok.com/imagine）
3. **刷新页面** - 有时页面状态不正确，刷新可以解决

## 获取帮助

请提供以下信息：

1. ✅ 诊断脚本的完整输出（截图或文本）
2. ✅ 当前页面的 URL
3. ✅ 页面截图（显示上传区域）
4. ✅ 是否已登录账号
5. ✅ 浏览器和版本（Chrome、Edge 等）

有了这些信息，我可以精确地更新扩展！
